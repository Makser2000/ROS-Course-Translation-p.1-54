# 3.7 SMACH или Деревья Поведения?

[SMACH](http://wiki.ros.org/smach) - это библиотека Python, предназначенная для построения сложных моделей поведения роботов с использованием иерархических машин состояний. Пакет __[_smach\_ros_ ](http://wiki.ros.org/smach_ros)обеспечивает тесную интеграцию с темами, сервисами и действиями ROS, а также существует [ряд учебников SMACH](http://wiki.ros.org/smach/Tutorials), охватывающих практически все его возможности. По этой причине SMACH, как правило, является хорошим началом для большинства начинающих пользователей ROS. Однако, если вы еще не знакомы с машинами с конечным состоянием, такой подход может сначала показаться немного запутанным. Если вы застряли, у вас есть и другие возможности.

Относительно новый подход, называемый деревьями поведения, впервые приобрел популярность среди программистов компьютерных игр. В последнее время деревья поведения стали использоваться и в робототехнике. Мы будем использовать пакет под названием __[_pi\_trees_](http://wiki.ros.org/pi_trees), который был написан автором специально для этой книги, но может быть использован любым удобным для вас способом. Деревья поведения организуют задачи роботов в структуру дерева, что делает их относительно простыми в концептуализации и программировании. Более того, многие свойства, которые мы требуем от исполнителя задач, такие как приоритизация \(subumption\), пауза и возобновление \(preemption\), иерархическая организация \(subtasks\), а также проверка состояния, являются естественными свойствами деревьев поведения, которые мы просто получаем "бесплатно", как только настраиваем инфраструктуру.

Следует также упомянуть третий подход, который называется [teer](http://wiki.ros.org/teer_ros). Teer также является автономной Python библиотекой для координации задач, но использует [сопрограммы](https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0) вместо машин состояний. Корутина похожа на подпрограмму, но она обеспечивает доступ к своему внутреннему состоянию во время работы. \(На Python это достигается с помощью ключевого слова yield.\) Следовательно, корутины могут быть использованы для представления одновременно выполняющихся задач, которые также могут быть приостановлены и возобновлены. В Teer нет встроенных обёртки вокруг ROS тем, сервисов и действий вроде SMACH или _pi\_trees_, поэтому для запуска в среде ROS требуется немного больше работы; следовательно, в этом томе мы не будем об этом рассказывать.



